# 프로토콜

---

- 프로토콜(Protocol)은 특정 역할을 수행하기 위한 프로퍼티, 메서드, 이니셜라이저 및 기타 요구사항 등의 청사진을 의미
- 구조체, 클래스, 열거형은 프로토콜을 **채택(Adopted)** 해서 특정 기능을 수행하기 위한 프로토콜의 요구 사항을 가지게 됨
- 프로토콜의 요구사항을 따르는 것, 혹은 요구사항을 모두 충족한 타입은 **프로토콜을 준수한다(Conform)** 라고 표현
- 타입에서 프로토콜의 요구사항을 준수하려면**, 프로토콜이 제시하는 모든 기능을 구현해야 함**
    - 프로토콜은 기능을 정의하고 제시할 뿐, 스스로 기능을 구현하지는 않음
- 프로토콜의 사용은 ‘요구조건 준수의 강제'라고 생각할 수도 있지만, 반대로 프로토콜 이름만 보고도 해당 타입이 필수적으로 가지고 있을 기능을 유추하는 관점으로도 볼 수 있음

## 정의

---

- `protocol` 키워드를 사용하여 정의

```swift
protocol ProtocolName {
	요구하는 조건
}
```

## 구현

---

프로퍼티 요구

- 프로퍼티 요구는 항상 `var` 키워드를 사용
- { get }은 읽기만 가능해도 상관 없다는 뜻
- { get set }은 읽기, 쓰기 모두 가능한 프로퍼티여야 한다는 뜻
- { get } 또는 { get set } 중 한 가지는 필수적으로 채택되어야 함

메서드 요구

- 포함되어야 하는 메서드를 명시
- `func funcName()` 처럼 필요한 메서드의 이름만 명시하고, 실제 내용은 타입에서 구현해야 함

이니셜라이저 요구

- 저장 프로퍼티의 초기값을 위한 init문 작성

```swift
protocol Talkable {
  
  // 프로퍼티 요구
  var topic : String { get set } // 읽기, 쓰기 모두 가능해야 함
  var language : String { get } // 읽기만 가능해도 됨
  
  // 프로토콜 내 프로퍼티는 읽기 혹은 읽기,쓰기 가능 여부를 필수로 명시해야 함
	//  var noGetSet : String // error: property in protocol must have explicit
  
  // 메서드 요구
  // 프로토콜에서는 있어야할 메서드의 이름만 명시할 뿐, 함수의 세부 내용은 실제 타입 내부에서 구현하면 됨
  func talk()
  
  // 이니셜라이저 요구
  init(inputTopic : String, inputLanguage : String)
}
```

## 프로토콜 채택 및 준수

---

형태 : `struct 클래스명 : 프로토콜명 { 구현부 }`

```swift
// 프로토콜 채택 및 준수

// Person 구조체는 Talkable 프로토콜을 채택함
// 프로토콜의 요구사항 중 하나라도 준수하지 않으면 에러가 발생함
struct Person : Talkable {
  
  // 프로퍼티 요구 준수
  
  // topic은 { get set }으로 선언되었기 때문에, 쓰기가 불가한 let으로 선언이 불가함
  let topic : String // error : 프로토콜에 필요하기 때문에 var로 선언해야 함
  var topic: String
  
	// 반대로 language는 읽기는 필수지만, 쓰기는 선택사항이기 때문에 var로 선언해도 됨
  var language : String
  let language: String
  
  // 읽기 전용 프로퍼티 요구는 저장이 아닌 연산 프로퍼티로도 대체 가능
   var language : String { return "한국어" }
   var language : String { get { return "한국어" } }
  
  
  // 읽기,쓰기 프로퍼티도 연산 프로퍼티로 대체 가능
  var subject : String = ""
  var topic: String {
    get {
      return subject
    }
    set {
      subject = newValue
    }
  }
 
  
  func talk() {
    print("\(topic)에 대해 \(language)로 말합니다.")
  }
  
  init(inputTopic : String, inputLanguage : String) {
    topic = inputTopic
    language = inputLanguage
  }
}
```
