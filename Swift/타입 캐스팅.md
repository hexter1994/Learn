# 스위프트 타입 캐스팅

- **인스턴스의 타입을 확인하**는 용도
- 클래스의 인스턴스를 부모 혹은 자식 클래스의 타입으로 사용할 수 있는지 확인하는 용도
- is, as를 사용함
- * 형변환은 타입 캐스팅이 아니라 새로운 값을 생성하는 것 Ex. `let someDouble = Double(2)`

## 예제 클래스

```swift
class Person {
  var name : String = ""
  func breath() {
    print("숨쉬기")
  }
}

class Student : Person {
  var school = ""
  func goToSchool() {
    print("등교하기")
  }
}

class UniversityStudent : Student {
  var major = ""
  func goToMT() {
    print("MT 가기")
  }
}

// 인스턴스 생성
var kazPerson = Person()
var kazStudent = Student()
var kazUniStudent = UniversityStudent()
```

## 타입 확인

- `is` 를 사용하여 타입을 확인

```swift
var result : Bool

// 클래스는 자신이 상속받은 클래스의 특성을 모두 가지고 있기 때문에
// 자식 클래스의 인스턴스는 타입 확인 시, 부모 혹은 조상 클래스도
// 자식 == 부모 = true, 부모 == 자식 = false, 자식 > 부모
result = kazPerson is Person // true
result = kazPerson is Student // false
result = kazPerson is UniversityStudent // false

result = kazStudent is Person // true
result = kazStudent is Student // true
result = kazStudent is UniversityStudent // false

result = kazPerson is Person // true
result = kazPerson is Student // false
result = kazPerson is UniversityStudent // false

if kazPerson is UniversityStudent {
  print("kazPerson = 대학생입니다.")
} else if kazPerson is Student {
  print("kazPerson = 학생입니다.")
} else if kazPerson is Person {
  print("kazPerson = 사람입니다.")
} // kazPerson = 사람입니다.

// 위의 if-else if문을 switch-case문으로 표현
switch kazUniStudent {
  case is Person: // case에는 switch문에서 체크하는 kazUniStudent가 전달됨
    print("kazUniStudent = 사람입니다.")
  case is Student:
    print("kazUniStudent = 학생입니다.")
  case is UniversityStudent:
    print("kazUniStudent = 대학생입니다.")
  default:
    print("kazUniStudent = 사람도, 학생도, 대학생도 아닙니다.")
} // kazUniStudent = 사람입니다.
// kazUniStudent는 Person, Student, UniversityStudent 모두에 해당하지만, switch문 특성상 true인 첫 번째 case문에서 종료되기 때문에 사람으로 출력됨

switch kazUniStudent {
  case is UniversityStudent:
    print("kazUniStudent = 대학생입니다.")
  case is Student:
    print("kazUniStudent = 학생입니다.")
  case is Person:
    print("kazUniStudent = 사람입니다.")
  default:
    print("kazUniStudent = 사람도, 학생도, 대학생도 아닙니다.")
} // kazUniStudent = 대학생입니다.
// 동일한 switch문에서 순서만 바꾼 경우.
// if-else if문과 switch-case문에서 순서가 중요한 이유.
```

- is의 활용

```swift
// is의 활용
// Person 타입의 배열 people에 kazStudent와 kazUniversityStudent를 넣은 것
let people : [Person] = [
  kazStudent, kazUniStudent
]

// 타입을 분기점으로 체크하여, 타입에 따라 다른 구문을 출력하는 등으로 is를 활용할 수 있음
// 타입에 민감한 Swift에서 Person 타입이 아닌 값들이 people 배열에 들어갈 수 있는 이유는 Person과 상호 호환되는 Student, UniversityStudent 타입들을 업캐스팅 처리를 자동으로 해서 배열에 집어넣은 것
for peopleCheck in people {
  if peopleCheck is Student {
    print("\(peopleCheck) = 학생입니다.")
  } else if peopleCheck is UniversityStudent {
    print("\(peopleCheck) = 대학생입니다.")
  }
}
```
